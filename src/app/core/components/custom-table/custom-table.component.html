<div class="card shadow-sm">
  <div
    class="card-header text-white d-flex justify-content-between align-items-center"
    style="background-color: #495057"
  >
    <!-- Header text + icon -->
    <span>
      <span *ngIf="settings.header.icon">
        <i [class]="settings.header.icon + ' me-2'"></i>
      </span>
      {{ settings.header.text }}
    </span>

    <!-- Optional header action button -->
    <button
      *ngIf="settings.header.actionButton"
      class="btn btn-light btn-sm"
      [routerLink]="settings.header.actionButton.routerLink"
      (click)="settings.header.actionButton.click?.()"
      [ngClass]="settings.header.actionButton.class"
    >
      <i
        *ngIf="settings.header.actionButton.icon"
        [class]="settings.header.actionButton.icon + ' me-1'"
      ></i>
      {{ settings.header.actionButton.text }}
    </button>
  </div>

  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover align-middle">
        <colgroup>
          <col
            *ngFor="let col of settings.columns"
            [style.width]="col.width || 'auto'"
          />
        </colgroup>
        <thead class="table-dark">
          <tr>
            <th *ngFor="let col of settings.columns">{{ col.title }}</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let row of rows"
            [class.uncategorized]="row['name'] === 'UNCATEGORIZED'"
          >
            <td *ngFor="let col of settings.columns">
              <span *ngIf="!col.type || col.type === 'text'">
                {{ row[col.field] || "/" }}
              </span>
              <span
                *ngIf="col.type === 'html'"
                [innerHTML]="row[col.field] || '/'"
              ></span>
              <span *ngIf="col.type === 'date'">
                {{
                  row[col.field]
                    ? (row[col.field] | date : "dd/MM/yyyy HH:mm")
                    : "/"
                }}
              </span>
            </td>
          </tr>
          <tr *ngIf="rows.length === 0">
            <td
              [attr.colspan]="settings.columns.length"
              class="text-center text-muted"
            >
              No data found.
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
